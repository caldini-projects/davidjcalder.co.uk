<!DOCTYPE html>
<html>

<head>
    <title>David J Calder - Developments</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
</head>

<body>
    <div class="w3-container">
        <div class="w3-panel w3-border w3-round-xlarge">
            <p>David J Calder - Developments</p>
        </div>
    </div>
    <div class="w3-container">

        <div class="w3-panel w3-border w3-round-xlarge">
            <p>
                <b>DJC 002: Crafting a blog</b>
            </p>            
            <p>
                <b>2022-09-16</b>
            </p>
            <p>I crafted the last blog in <a href="https://html.spec.whatwg.org/" target="_blank"
                    rel="noopener">HTML</a> in VS Code. Writing the text of the blog was easy, but applying links was
                painful. VS Code autocompleted each tag as I wrote it, which meant I kept having to delete each
                <code>&lt;/a&gt;</code> tag and rewrite it on the other side of the text I was marking up. I've been
                keen to try out the ideas at <a href="https://jamstack.org/" target="_blank"
                    rel="noopener">Jamstack.org</a> for a while now. I really wanted to set up <a
                    href="https://www.netlifycms.org/" target="_blank" rel="noopener">Netlify CMS</a> to write content
                to GitHub, but in doing so I found I needed to set up a Netlify account to facilitate the OAuth login
                (more details <a
                    href="https://answers.netlify.com/t/netlify-cms-github-login-doesnt-work-without-localhost/35588"
                    target="_blank" rel="noopener">here</a> and <a
                    href="https://github.com/netlify/netlify-cms/issues/663" target="_blank" rel="noopener">here</a>).
                Then, when I was doing the OAuth setup, I seemed to be forced into setting up a Netlify site. I didn't
                like it and soon abandoned it.
            </p>
            <p>I spent several hours looking for something that would fit my needs when I came across <a
                    href="https://tiny.cloud" target="_blank" rel="noopener">TinyMCE</a>, which is
                a really nice WYSIWYG editor that spits out clean HTML5. It doesn't actually spit it out to anywhere in
                particular though - you have to code that bit yourself. There's a <a
                    href="https://www.tiny.cloud/blog/load-save-content-with-ajax/" target="_blank" rel="noopener"
                    data-saferedirecturl="https://www.tiny.cloud/blog/load-save-content-with-ajax/">helpful
                    blog</a> showing how you can do this. Instead of writing a PHP back end I'll write a Lambda function
                - so, one for the future. For now, I will use the WYSIWYG editor to create the HTML and then copy and
                paste it into VS Code.</p>
            <p>Instructions:</p>
            <ul>
                <li>Register an account at <a href="https://www.tiny.cloud/">tiny.cloud</a></li>
                <li>Add the domain of your website as an <a href="https://www.tiny.cloud/my-account/domains/">approved
                        domain</a></li>
                <li>Create a new page on your website, e.g. wysiwyg.html</li>
                <li>Copy the <a href="https://www.tiny.cloud/docs/tinymce/6/basic-setup/#basic-configuration-example"
                        target="_blank" rel="noopener">basic configuration example</a> into wysiwyg.html and swap the
                    text <code>no-api-key</code> with the api key generated for you when you created your account</li>
                <li>Finally, load the page and use the editor to write your next blog</li>
                <li>Then choose <em>View &gt; Source code</em> and copy the output to your HTML editor</li>
            </ul>
        </div>

    </div>
    <div class="w3-container">

        <div class="w3-panel w3-border w3-round-xlarge">
            <p>
                <b>DJC 001: Hello World!</b>
            </p>
            <p>
                <b>2022-09-16</b>
            </p>
            <p>
                I really want to learn <a href="https://en.wikipedia.org/wiki/AWS_Lambda">AWS Lambda</a>, and I feel the
                best way to do that is set up a demonstration website
                where I can showcase the numerous things that Lambda (and other services) can do.
                The net output will be a reminder for me and a repository of knowledge for others.
            </p>
            <p>
                I started off with a few things that had been set up over the past couple of years: a <a
                    href="https://aws.amazon.com/free/">free AWS account</a>
                and an <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users.html">IAM user</a> with full
                permissions. I'd registered the domain
                davidjcalder.co.uk in <a
                    href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/domain-register.html#domain-register-procedure">Route53</a>.
                <a href="https://code.visualstudio.com/">Visual Studio Code</a> was already installed on my Mac, and I
                had a
                free <a href="https://github.com/">GitHub</a> account.
            </p>
            <p>
                I began by creating a <a href="https://docs.github.com/en/get-started/quickstart/create-a-repo">new
                    repository</a> on GitHub to
                store the source HTML for my website. I originally intended to have GitHub deploy the HTML via GitHub
                actions but then I
                found a VS Code plugin called <a href="https://aws.amazon.com/visualstudiocode/">AWS Toolkit</a> that
                makes it easy to upload the
                files to S3. I created a new S3 bucket, called www.davidjcalder.co.uk and configured
                it to act as a <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/WebsiteHosting.html">web
                    server</a>. I also added
                a CNAME to the DNS entry in Route53 pointing to the public address of the S3 bucket. I crafted the HTML
                by hand,
                stealing snippets from <a href="https://www.w3schools.com/html/default.asp">W3Schools</a> and using
                their <a href="">W3.CSS</a> framework to
                provide some simple styling.
            </p>
            <p>
                Mailchimp offers a free service for sending emails to subscribers so I signed up to it. I needed to
                verify
                the email address my mail would be sent from so I had to configure <a
                    href="https://docs.aws.amazon.com/ses/latest/dg/Welcome.html">Amazon SES</a> to <a
                    href="https://docs.aws.amazon.com/ses/latest/dg/receiving-email.html">receive emails</a>. This
                involved
                a number of actions: <a
                    href="https://docs.aws.amazon.com/ses/latest/dg/creating-identities.html#verify-domain-procedure">creating
                    a domain identity</a> (which needs to be in one of the <a
                    href="https://docs.aws.amazon.com/ses/latest/dg/regions.html#region-receive-email">three Regions</a>
                that can receive email); <a
                    href="https://docs.aws.amazon.com/ses/latest/dg/creating-identities.html#just-verify-domain-proc">verifying
                    a DKIM domain identity with my DNS provider</a> (very easy to do because the domain was set up in
                Route53); <a href="https://docs.aws.amazon.com/ses/latest/dg/receiving-email-mx-record.html">adding an
                    MX
                    record to my domain in Route53</a>. I then created another S3 bucket and <a
                    href="https://docs.aws.amazon.com/ses/latest/dg/receiving-email-permissions.html#receiving-email-permissions-s3">gave
                    it the permissions</a> to receive emails from SES (decide on a rule_set_name and receipt_rule_name
                now - they will be used later).
                Finally I configured a rule set and a receipt rule name in <a
                    href="https://docs.aws.amazon.com/ses/latest/dg/receiving-email-receipt-rules-console-walkthrough.html">Email
                    receiving</a> (note - you'll only see this option in the console if you switch to
                one of the <a href="https://docs.aws.amazon.com/ses/latest/dg/regions.html#region-receive-email">three
                    Regions</a> that can receive
                email)
                using the same rule_set_name and receipt_rule_name I used in the S3 permissions policy created earlier
                (a
                bit back-to-front if you ask me). This <a
                    href="https://aws.amazon.com/premiumsupport/knowledge-center/ses-troubleshoot-inbound-emails/">troubleshooting
                    doc</a> was very helpful for tidying up the loose ends.
            </p>
            <p>
                Lessons learnt: when configuring permissions policies make sure you change all the words highlighted in
                red;
                when the Amazon docs say a service is only available in a certain region, don't assume yours is one of
                them;
                don't forget to activate the rule set.
            </p>
        </div>

    </div>
</body>

</html>